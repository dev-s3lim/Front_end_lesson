<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>JS Async Await</title>
</head>
<body>
  <script>
    // jQuery AJAX를 Promise로 감싸기
    function fetchPost() {
      return new Promise((resolve, reject) => {
        $.ajax({
          url: "https://jsonplaceholder.typicode.com/posts/1",
          type: 'GET',
          dataType: 'json',
          success: function (data) {
            resolve(data);
          },
          error: function (err) {
            reject(err);
          }
        });
      });
    }

    async function callBackHell() {
      try {
        const result1 = await fetchPost();
        console.log("Result 1:", result1);

        const result2 = await fetchPost();
        console.log("Result 2:", result2);

        const result3 = await fetchPost();
        console.log("Result 3:", result3);
      } catch (error) {
        console.error("에러 발생:", error);
      }
    }

    callBackHell();
    console.log("hello world");
  </script>

  <!-- jQuery CDN -->
  <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
</body>
</html>